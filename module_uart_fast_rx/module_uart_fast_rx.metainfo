-------------------------------------------------------------------------------
-- Descriptive metadata
-------------------------------------------------------------------------------

componentName = "Simple UART RX"
componentFullName = ""
alternativeNames = { }
componentDescription = "Stripped down very simple, fast UART RX with limited features"
componentVersion = "1v1"

-------------------------------------------------------------------------------
-- Parameter descriptions.
-------------------------------------------------------------------------------

configPoints = {}

derivedValues = {}

ports = {
  p_uart_tx = {
    short   = "UART RX",
    long    = "UART RX Pin",
    help    = "",
    width   = 1
  }
}

channels = {
  c_rx_uart = {
    short = "RX channel",
    type = "streaming",
    long  = "Channel for the client to input RX data from the Uart receiver",
    help  = "",
  }
}        

function getConfigStatus()
  local status = "Valid Configuration"
  local issues = {}
  return status, issues
end
            
-------------------------------------------------------------------------------
-- Source generation functions
-------------------------------------------------------------------------------

generatedCode = {
  includes = { 
    "uart_rx.h"
  },
  globals = [[
    in port p_uart${swblock.id}_rx = XS1_PORT_1E;
  ]],
  body = [[
    uart_rx_fast(p_uart_rx, c_rx_uart, 10); //10x10ns = 100ns bit period
  ]]
}

